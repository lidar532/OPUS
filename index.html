<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="A Python library for reading and parsing NOAA OPUS reports.">

<title>OPUS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="OPUS">
<meta property="og:description" content="A Python library for reading and parsing NOAA OPUS reports.">
<meta property="og:site_name" content="OPUS">
<meta name="twitter:title" content="OPUS">
<meta name="twitter:description" content="A Python library for reading and parsing NOAA OPUS reports.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">OPUS</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">OPUS</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">OPUS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./OPUS_test_strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OPUS_test_strings.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./decode_opus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OPUS Report Decoder.</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#install" id="toc-install" class="nav-link active" data-scroll-target="#install">Install</a></li>
  <li><a href="#dev-install" id="toc-dev-install" class="nav-link" data-scroll-target="#dev-install">Dev Install</a></li>
  <li><a href="#simple-use" id="toc-simple-use" class="nav-link" data-scroll-target="#simple-use">Simple use</a>
  <ul class="collapse">
  <li><a href="#basic-opus-data." id="toc-basic-opus-data." class="nav-link" data-scroll-target="#basic-opus-data.">Basic OPUS data.</a></li>
  <li><a href="#nad83-class-data." id="toc-nad83-class-data." class="nav-link" data-scroll-target="#nad83-class-data.">nad83 class data.</a></li>
  <li><a href="#itrf-class-data." id="toc-itrf-class-data." class="nav-link" data-scroll-target="#itrf-class-data.">ITRF class data.</a></li>
  <li><a href="#state-plane-class-data." id="toc-state-plane-class-data." class="nav-link" data-scroll-target="#state-plane-class-data.">State Plane class data.</a></li>
  <li><a href="#opus-reported-dates-and-times" id="toc-opus-reported-dates-and-times" class="nav-link" data-scroll-target="#opus-reported-dates-and-times">OPUS reported Dates and times</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/lidar532/OPUS/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">OPUS</h1>
</div>

<div>
  <div class="description">
    A Python library for reading and parsing <a href="https://www.ngs.noaa.gov/OPUS/index.jsp">NOAA OPUS reports.</a>
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>This function extracts most of the information from a NOAA OPUS report, or Extended report. NOAA’s <a href="https://www.ngs.noaa.gov/OPUS/view.jsp">OPUS ( Online Positioning User Service)</a> provides free access to high-accuracy National Spatial Reference System (NRCS) coordinates. To use OPUS upload a RINEX data file collected with a survey grade GNSS to OPUS and it will compute the precise position for you. The OPUS report will will be emailed to you within a few minutes. Once you receive the OPUS report, paste the contents to a file. Once you have saved the report to a file, you can use decode_OPUS() to easily extract any of the data to your Python program. decode_OPUS() can read directly from an OPUS file or a string containing the contents of an OPUS file.</p>
<section id="install" class="level2">
<h2 class="anchored" data-anchor-id="install">Install</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install OPUS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="dev-install" class="level2">
<h2 class="anchored" data-anchor-id="dev-install">Dev Install</h2>
<p>When working on the <code>decode_OPUS()</code> function, use the <code>Dev Install</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> <span class="at">-e</span> install OPUS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="simple-use" class="level2">
<h2 class="anchored" data-anchor-id="simple-use">Simple use</h2>
<p>Using decode_OPUS() is easy. Simply install and then import OPUS.</p>
<div id="cell-8" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> OPUS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> OPUS <span class="im">import</span> OPUS_test_data</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>OPUS_test_data.opus_txt_string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>"\nFILE: SFKW1210.24O OP1716177177447\n\n 1008   NOTE: You provided a zero or negative antenna height.\n 1008   If ARP HGT = 0.0, OPUS solves for the position of your selected antenna's reference point (ARP).\n 1008   If ARP HGT &lt; 0.0, OPUS solves for a location inside or above the antenna\n 1008\n                              NGS OPUS SOLUTION REPORT\n                              ========================\n\nAll computed coordinate accuracies are listed as peak-to-peak values.\nFor additional information: https://www.ngs.noaa.gov/OPUS/about.jsp#accuracy\n\n      USER: xxxxx@yyyy.com                           DATE: May 20, 2024\nRINEX FILE: sfkw121p.24o                             TIME: 03:53:37 UTC\n\n\n  SOFTWARE: page5  2008.25 master253.pl 160321      START: 2024/04/30  15:51:00\n EPHEMERIS: igs23122.eph [precise]                   STOP: 2024/04/30  22:51:00\n  NAV FILE: brdc1210.24n                         OBS USED: 14342 / 14604   :  98%\n  ANT NAME: TRMR10-2        NONE              # FIXED AMB:    65 /    68   :  96%\nARP HEIGHT: 0.000                             OVERALL RMS: 0.014(m)\n\n\n REF FRAME: NAD_83(2011)(EPOCH:2010.0000)              ITRF2014 (EPOCH:2024.3301)\n\n         X:     -2475273.328(m)   0.019(m)          -2475274.384(m)   0.019(m)\n         Y:     -4509243.734(m)   0.013(m)          -4509242.286(m)   0.013(m)\n         Z:      3760194.885(m)   0.015(m)           3760194.828(m)   0.015(m)\n\n       LAT:   36 21  0.18896      0.022(m)        36 21  0.20210      0.022(m)\n     E LON:  241 14 10.16711      0.012(m)       241 14 10.10206      0.012(m)\n     W LON:  118 45 49.83289      0.012(m)       118 45 49.89794      0.012(m)\n    EL HGT:         1094.647(m)   0.012(m)              1094.000(m)   0.012(m)\n ORTHO HGT:         1122.958(m)   0.068(m) [NAVD88 (Computed using GEOID18)]\n\n                        UTM COORDINATES    STATE PLANE COORDINATES\n                         UTM (Zone 11)         SPC (0404 CA 4)\nNorthing (Y) [meters]     4024219.772           612842.492\nEasting (X)  [meters]      341727.091          2021197.302\nConvergence  [degrees]    -1.04567778           0.14088889\nPoint Scale                0.99990865           0.99995228\nCombined Factor            0.99973690           0.99978052\n\nUS NATIONAL GRID DESIGNATOR: 11SLA4172724220(NAD 83)\n\n\n                              BASE STATIONS USED\nPID       DESIGNATION                        LATITUDE    LONGITUDE DISTANCE(m)\nDM6188 P572 SHADEQUARTCS2006 CORS GRP      N363507.843 W1185716.494   31229.8\nDN7424 P567 RIOBRAVO_CS2005 CORS GRP       N352515.393 W1184512.826  103109.5\nDK6413 P467 ALABAMAHILCS2006 CORS GRP      N363412.712 W1180526.193   65116.5\n\n                 NEAREST NGS PUBLISHED CONTROL POINT\nGT1835      DENNISON                       N361906.411 W1184447.601    3835.1\n\nThis position and the above vector components were computed without any\nknowledge by the National Geodetic Survey regarding the equipment or\nfield operating procedures used.\n"</code></pre>
</div>
</div>
<p>To use decode_OPUS(), simply call it with the filename of an OPUS file and it will return an object containing most of the data extracted from the OPUS file.</p>
<div id="cell-11" class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>opus <span class="op">=</span> OPUS.decode_OPUS( opus_file <span class="op">=</span> <span class="st">'../test_data/OPUS-california.txt'</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Print the NAD83 latitude, longitude, ellipsoidal and orthometric heights and the difference in heights.</p>
<div id="cell-13" class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"                                                      Elevations (m)   Elevation Dif (m)</span><span class="ch">\n</span><span class="st">"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"   OPUS File    Latitude (deg)   Longitude (deg) Ellipsodal   NAVD88 Ellipsoidal-NAVD88</span><span class="ch">\n</span><span class="st">"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  opus.rinex_file,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  opus.nad83.lat, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  opus.nad83.lon, </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  opus.nad83.el_hgt,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  opus.nad83.navd88_hgt,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  opus.nad83.navd88_hgt <span class="op">-</span> opus.nad83.el_hgt</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                      Elevations (m)   Elevation Dif (m)
    OPUS File    Latitude (deg)   Longitude (deg) Ellipsodal   NAVD88 Ellipsoidal-NAVD88
 sfkw121p.24o 36.35005248888889 -118.76384246944444 1094.647 1122.958 28.31100000000015</code></pre>
</div>
</div>
<p>Print the WGS84/ITRF latitude, longitude, ellipsoidal, orthometric and the difference in heights.</p>
<div id="cell-15" class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"  WGS84 / ITRF                                 Ellipsodal Elevations (m) Elevation Dif (m)</span><span class="ch">\n</span><span class="st">"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"   OPUS File    Latitude (deg)     Longitude (deg)  WGS84   NAD83  Ellipsoidal-NAVD88</span><span class="ch">\n</span><span class="st">"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  opus.rinex_file,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  opus.itrf.lat, </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  opus.itrf.lon, </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  opus.itrf.el_hgt,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  opus.nad83.el_hgt,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  opus.nad83.el_hgt <span class="op">-</span> opus.itrf.el_hgt</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  WGS84 / ITRF                                 Ellipsodal Elevations (m) Elevation Dif (m)
    OPUS File    Latitude (deg)     Longitude (deg)  WGS84   NAD83  Ellipsoidal-NAVD88
 sfkw121p.24o 36.35005613888889 -118.76386053888889 1094.0 1094.647 0.6469999999999345</code></pre>
</div>
</div>
<div id="cell-16" class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>optxt <span class="op">=</span> OPUS.decode_OPUS( txt <span class="op">=</span> OPUS.opus_txt_string )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-17" class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>optxt.nad83.lat, optxt.nad83.lon, optxt.nad83.navd88_hgt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>(36.35005248888889, -118.76384246944444, 1122.958)</code></pre>
</div>
</div>
<section id="basic-opus-data." class="level3">
<h3 class="anchored" data-anchor-id="basic-opus-data.">Basic OPUS data.</h3>
<p>Returned OPUS data is returned in a class object which contains basic OPUS data and three sub-classes. In the cell below, we will dump and examine the elements contained in the basic OPUS class.</p>
<div id="cell-20" class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Key           Value"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> optxt.__dict__:</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">:13}</span><span class="ss"> </span><span class="sc">{</span>optxt<span class="sc">.</span>__dict__[k]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key           Value
nad83         &lt;OPUS.decode_OPUS.decode_OPUS.&lt;locals&gt;.POINT object&gt;
itrf          &lt;OPUS.decode_OPUS.decode_OPUS.&lt;locals&gt;.POINT object&gt;
state_plane   &lt;OPUS.decode_OPUS.decode_OPUS.&lt;locals&gt;.POINT object&gt;
strings       &lt;OPUS.decode_OPUS.decode_OPUS.&lt;locals&gt;.STRINGS object&gt;
title         NGS OPUS SOLUTION REPORT
user          xxxxx@yyyy.com
run_date      2024-05-20 00:00:00
rinex_file    sfkw121p.24o
run_datetime  2024-05-20 03:53:37
software      page5  2008.25 master253.pl 160321
start         2024-04-30 15:51:00
ephermis      precise
stop          2024-04-30 22:51:00
ant_name      TRMR10-2        NONE
arp_height    0.0
lat_rms       0.022
lon_rms       0.012
el_rms        0.012
utm_zone      11
northing      4024219.772
easting       341727.091
us_grid       11SLA4172724220</code></pre>
</div>
</div>
</section>
<section id="nad83-class-data." class="level3">
<h3 class="anchored" data-anchor-id="nad83-class-data.">nad83 class data.</h3>
<p>OPUS computes coordinates in the <a href="https://en.wikipedia.org/wiki/North_American_Datum#North_American_Datum_of_1983">North American Datum of 1983</a>.<br>
We will examine the <code>nad83</code> subclass. The <code>nad83</code> subclass contains the ECEF x,y,z coordinates as well as the floating point values for latitude <code>lat</code>, longitude <code>lon</code>, and NAD83 ellipsoidal elevation <code>el_hgt</code> and the <code>navd88_hgt</code>. The <a href="https://geodesy.noaa.gov/datums/vertical/north-american-vertical-datum-1988.shtml">NAVD88</a> data is only available in the US.</p>
<div id="cell-23" class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Key           Value</span><span class="ch">\n</span><span class="st">------------------------------"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> optxt.nad83.__dict__:</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">:13}</span><span class="ss"> </span><span class="sc">{</span>optxt<span class="sc">.</span>nad83<span class="sc">.</span>__dict__[k]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key           Value
------------------------------
ref_frame     NAD_83(2011)(EPOCH:2010.0000)
x             -2475273.328
y             -4509243.734
z             3760194.885
lat           36.35005248888889
lon           -118.76384246944444
el_hgt        1094.647
navd88_hgt    1122.958</code></pre>
</div>
</div>
</section>
<section id="itrf-class-data." class="level3">
<h3 class="anchored" data-anchor-id="itrf-class-data.">ITRF class data.</h3>
<p>In addition to the <code>nad83</code>, OPUS also reports the position in the <a href="https://en.wikipedia.org/wiki/International_Terrestrial_Reference_System_and_Frame">International Terresterial Reference Frame (ITRF)</a> for both <a href="https://en.wikipedia.org/wiki/Earth-centered,_Earth-fixed_coordinate_system">ECEF</a> and geodetic ellipsodal coordinates.</p>
<div id="cell-26" class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Key           Value</span><span class="ch">\n</span><span class="st">------------------------------"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> optxt.itrf.__dict__:</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">:13}</span><span class="ss"> </span><span class="sc">{</span>optxt<span class="sc">.</span>itrf<span class="sc">.</span>__dict__[k]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key           Value
------------------------------
ref_frame     ITRF2014 (EPOCH:2024.3301)
x             -2475274.384
y             -4509242.286
z             3760194.828
lat           36.35005613888889
lon           -118.76386053888889
el_hgt        1094.0</code></pre>
</div>
</div>
</section>
<section id="state-plane-class-data." class="level3">
<h3 class="anchored" data-anchor-id="state-plane-class-data.">State Plane class data.</h3>
<p>State Plane data will be present when the OPUS point is in the United States.</p>
<div id="cell-29" class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Key           Value</span><span class="ch">\n</span><span class="st">------------------------------"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> k <span class="kw">in</span> optxt.state_plane.__dict__:</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>k<span class="sc">:13}</span><span class="ss"> </span><span class="sc">{</span>optxt<span class="sc">.</span>state_plane<span class="sc">.</span>__dict__[k]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key           Value
------------------------------
id            0404 CA 4
northing      612842.492
easting       2021197.302</code></pre>
</div>
</div>
</section>
<section id="opus-reported-dates-and-times" class="level3">
<h3 class="anchored" data-anchor-id="opus-reported-dates-and-times">OPUS reported Dates and times</h3>
<p>OPUS reported dates and times are converted to <a href="https://docs.python.org/3/library/datetime.html">python datetime</a> data types to make calculations easier. Below we will compute the occupation time from the decoded Start and Stop times in the OPUS report.</p>
<div id="cell-33" class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>occupation_time <span class="op">=</span> (optxt.stop <span class="op">-</span> optxt.start)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>occupation_time.seconds <span class="op">/</span> <span class="dv">3600</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="ss">f"Start time: </span><span class="sc">{</span> optxt<span class="sc">.</span>start<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="ss">f" Stop time: </span><span class="sc">{</span> optxt<span class="sc">.</span>stop<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="ss">f"The position was occupied for </span><span class="sc">{</span>occupation_time<span class="sc">.</span>seconds<span class="op">/</span><span class="dv">3600</span><span class="sc">:5.2f}</span><span class="ss"> hours."</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start time: 2024-04-30 15:51:00
 Stop time: 2024-04-30 22:51:00
The position was occupied for  7.00 hours.</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/lidar532\.github\.io\/OPUS");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/lidar532/OPUS/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>